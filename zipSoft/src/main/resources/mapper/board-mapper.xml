<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zipsoft.board.BoardMapper">
	
	<select id="getBoardList" resultType="boardDto">
		SELECT ROW_NUMBER() OVER(ORDER BY UPDATE_DATE ) AS NO
			   ,TB.ID
			   ,TB.SUBJECT
			   ,TB.CONTENT
			   ,TB.VIEW_CNT
			   ,TU.NAME AS USER_NAME
			   ,TB.UPDATE_DATE
		  FROM TB_BOARD TB
         INNER JOIN TB_USER TU 
            ON TB.REG_ID = TU.ID
         ORDER BY TB.UPDATE_DATE DESC
         LIMIT 10
	</select>
	
	<insert id="insertBoard" parameterType="boardDto" >
		INSERT INTO TB_BOARD (
			SUBJECT
			,CONTENT
			,REG_DATE
			,REG_ID
			,UPDATE_DATE
			,UPDATE_ID
		) VALUES (
			#{subject}
			,#{content}
			,date_format(now(), '%Y%m%d%H%i%s')
			,#{regId}
			,date_format(now(), '%Y%m%d%H%i%s')
			,#{regId}
		)
	</insert>
	
</mapper>
